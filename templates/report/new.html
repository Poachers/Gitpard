{% extends "main.html" %}
{% load staticfiles %}

{% block content %}
    <div ng-controller="NewReportCtrl">
        <form>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Ветка</label>
                        <select class="form-control" ng-model="branch"
                                ng-options="branch.branch_name for branch in branches"
                                ng-change="changeParams()"></select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Тип отчета</label>
                        <select class="form-control" ng-model="type"
                                ng-options="type.name for type in types" ng-change="changeParams()"></select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Включения</label>
                        <textarea class="form-control" ng-model="include" ng-blur="changeParams()" placeholder="\.py$"></textarea>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Исключения</label>
                        <textarea class="form-control" ng-model="exclude" ng-blur="changeParams()" placeholder=".*/__init__\.py"></textarea>
                    </div>
                </div>
                <div class="col-md-4 col-md-offset-7">
                    <div class="form-group">
                        <div class="btn btn-block btn-primary" ng-click="getReport()">Подготовить отчет</div>
                    </div>
                </div>
                <div class="col-md-12">
                    <h3>Список файлов попадущих в отчет</h3>
                    <span class="col-md-12" ng-repeat="file in files" style="color: {$ file.color $}">
                        {$ file.path $}
                    </span>
                </div>
            </div>
        </form>
    </div>
{% endblock %}

{% block scripts %}
    <script src="{% static 'js/report/new/main.js' %}"></script>
{% endblock scripts %}